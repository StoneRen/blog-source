---
title: æ–°ä¸Šä¹¦æ‘˜é¢‘é“
date: 2017-09-01 23:25:31
tags: [vue,markdown,hexo,hexo-filter-flowchart,flow,kindle]
---

æ–°ä¸Š`ä¹¦æ‘˜`é¢‘é“,æ’’èŠ±ğŸ‰. æŸ¥çœ‹[ä¹¦æ‘˜](/digest)

å¤§å®¶å¹³æ—¶å¯èƒ½æ²¡æœ‰æ—¶é—´å»çœ‹ä¸€æœ¬å®Œæ•´çš„ä¹¦.æˆ‘ä¼šåœ¨è¯»ä¹¦çš„æ—¶å€™,çœ‹åˆ°æœ‰æ„æ€çš„åœ°æ–¹å°±ç”¨kindleç›´æ¥æ ‡æ³¨å‡ºæ¥. è¿™æ ·å¤§å®¶å°±èƒ½ç›´æ¥çœ‹çœ‹è¿™äº›ä¹¦ä¸­æœ‰æ„æ€çš„åœ°æ–¹äº†.

## æµç¨‹
æŠ€æœ¯ä¸Šä¹Ÿæ²¡æœ‰çªå‡ºçš„åœ°æ–¹,å’Œå…¶ä»–å‡ ä¸ªé¢‘é“ä¸€æ ·,ç”¨äº†`vue`è¿›è¡Œäº†ç®€å•çš„è®¾ç½®.

å› ä¸ºä¹¦æ‘˜å¤ªå¤šäº†,å…¨éƒ½åˆ—å‡ºæ¥,å¤ªé•¿äº†,åè€Œè®©äººä¸æƒ³è¯»ä¸‹å».

æˆ‘è®¾ç½®äº†éšæœºè¯»5æ¡ä¹¦æ‘˜,æ¯æ¡è¯»å®Œéƒ½ä¼šä»æ•°æ®ä¸­åˆ æ‰,æ‰€ä»¥ä½ ä¸ä¼šç‹¬åˆ°é‡å¤çš„å†…å®¹.

æŠ€æœ¯æµç¨‹å¦‚ä¸‹:

```flow
st=>start: Start
e=>end: End
op1=>operation: fetch `kindle.txt`|past
op2=>operation: random select|past
op3=>operation: push data
op4=>operation: Render
sub1=>subroutine: remove readed

st->op1(right)->op2->op3(right)->op4(right)->e
```

å»[çœ‹ä¸€çœ‹](/digest)å§

## ä»£ç éƒ¨åˆ†

å› ä¸ºæœ‰`vuejs`è¿™ä¸ªç¥å™¨,ä¸€åˆ‡å‰ç«¯é€»è¾‘ä»£ç éƒ½æ¯”è¾ƒç®€å•çš„æå®šäº†.

`created()`=>`getData()`=>`random()`=>`read()`

`getData`: ä»`github`ä¸Šæ‹‰å»æˆ‘çš„kindleä¹¦æ‘˜æ•°æ®
`random`: è·å–éšæœºçš„ä¹¦æ‘˜ç´¢å¼•id,ç„¶åä»åŸå§‹æ•°æ®ä¸­åˆ é™¤,è¿™æ ·è¯»è¿‡çš„ä¹¦æ‘˜å°±ä¸ä¼šé‡å¤æ˜¾ç¤ºäº†

```js
var length = this.oData.length;
this.dData=[];
var data = [];
for (var i = 0, l = this.count; i < l; i++) {
  var index = Math.ceil(Math.random() * length);
  data.push(this.oData[index]);
  this.oData.splice(index, 1);
}
```

`read`: å°±æ˜¯å¯¹æ¯æ¡åŸå§‹æ•°æ®è¿›è¡Œåˆ†æ,è½¬æ¢æˆæˆ‘ä»¬éœ€è¦çš„å¯¹è±¡.ç„¶åä»åŸå§‹æ•°æ®ä¸­åˆ é™¤.æ¯éš”`0.3ç§’`å°±æ˜¾ç¤ºå‡ºæ¥

```js
var originData = data.shift();
this.dData.unshift(digest);
setTimeout(function() {
	self.read(data);
}, 300);
```

è¿˜ä¸æ˜¯ååˆ†ç†è§£çš„,è‡ªå·±å»çœ‹ä¸€ä¸‹ä»£ç å§[github-digest.js](https://github.com/StoneRen/stoneren.github.io/blob/master/digest/digest.js)

å‰ç«¯æ¨¡æ¿ä¹Ÿå¾ˆç®€å•:

```html
<div v-for="(item,index) in dData">
<h3 v-html="item.title"></h3>
<span class="digest-time" v-html="item.date"></span>
<p v-html="item.content"></p>
</div>
<p>
    <button @click="random()" v-html="'ç‚¹å‡»çœ‹éšæœºä¹¦æ‘˜('+count+'æ¡)'"></button> &nbsp;&nbsp;&nbsp;&nbsp;
    <button onclick="location.href='/digest/kindle.txt'" v-html="'æŸ¥çœ‹å…¨éƒ¨ä¹¦æ‘˜('+oData.length+'æ¡)'">å…¨éƒ¨ä¹¦æ‘˜</button>
</p>
```

å¤‡æ³¨: `hexo`é»˜è®¤ä¸æ”¯æŒæµç¨‹å›¾,å¯ä»¥è‡ªå·±æ·»åŠ ä¸€ä¸‹.å…·ä½“æŸ¥çœ‹[hexo-filter-flowchart](https://github.com/bubkoo/hexo-filter-flowchart)
